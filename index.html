<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Czateria mod v1.0</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: 'Arial';
        }
        a {
            text-decoration: none;
        }

        .codeDiv {
            width: 60%;
            height: 600px;
            text-align: left;
            background-color: #282c34;
            overflow-y: auto;
            overflow-x: hidden;
            color:#abb2bf; 
            padding-left: 30px;
            padding-top: 30px;
            border-radius: 8px;
            font-family: monospace;
            white-space: pre-wrap;
            overflow-wrap: break-word;
        }
        a:link {
        text-decoration: none;
        color: black;
        }

        a:visited {
        text-decoration: none;
        color: black;
        }

        a:hover {
        text-decoration: none;
        color: black;
        }

        a:active {
        text-decoration: none;
        color: black;
        }
    </style>
</head>
<body>
    <center>
        <br><br>

        <a href="javascript: (() => {!function(){function e(e){let n=new Map,a=e.processMessage;e.processMessage=function(e){if((t=JSON.parse(e.data))&&t.code)switch(t.code){case 128:t.users.forEach(e=>{let a=e.login,i=Date.now();n.set(a,i)});break;case 130:let i=t.login;n.delete(i);break;case 129:let o=t.login;if(Date.now()-n.get(o)<3e4)return}return a.apply(this,arguments)}}let n=[];CHNS.emotIcons.emotIcons.forEach(e=>{e.emoticons.forEach(e=>{e.startsWith('icon_')||n.push(e)})});let a=CHNS.UserMessage;function i(){document.querySelector('.m-messagesTextArea').style.backgroundImage='none',document.querySelector('.js-play-game')?.remove(),document.querySelector('div[id^=m-users-ordinary]')?.remove(),CHNS.connManager.connections[CHNS.activemaintabname].channelMain.channelGlobalModel.setShowAvatarStatus(!1),CHNS.connManager.connections[CHNS.activemaintabname].channelMain.$usersListWrapper.addClass('m-usersList-short')}function o(){let e=document.querySelector('.context-menu');if(!e)return;let n=document.getElementsByClassName('context-menu-item context-menu-item--header')[0].innerText,a=new Set(JSON.parse(localStorage.czateria_znajomi||'[]')),i=a.has(n);if(e.querySelector('.context-menu-item--friend'))return;let o=document.createElement('div');o.className='context-menu-item context-menu-item--friend',o.innerText=i?'\uD83D\uDD95 Usuń z listy znajomych':'\uD83D\uDC4B Dodaj do znajomych',o.onclick=function(){i?a.delete(n):a.add(n),localStorage.czateria_znajomi=JSON.stringify([...a]),e.remove();document.getElementById('friends-panel')&&s(!0)},e.appendChild(o),e.querySelector('.context-menu-item--wrongBehavior')?.remove();let r=e.querySelector('.context-menu-item--ignore'),c=new Set(JSON.parse(localStorage.czateria_ignorowani||'[]')),l=c.has(n);r.innerText=l?'✔️ Przestań ignorowac':'⛔ Ignoruj',r.onclick=function(){l?c.delete(n):c.add(n),localStorage.czateria_ignorowani=JSON.stringify([...c]),e.remove()}}CHNS.UserMessage=function(e){return console.log('Original Message:',e.msg),e.msg=e.msg.replace(/<icon>(\d+)<\/icon>/g,(e,a)=>{let i=parseInt(a,10);return n[i]?n[i]:e}),console.log('Modified Message:',e.msg),new a(e)},CHNS.emotIcons.getMessageWithIcons=function(e){return e};let r=new MutationObserver(e=>{for(let n of e)if(n.addedNodes.length&&n.addedNodes[0].classList?.contains('context-menu')){o();break}});function s(e){let n=document.getElementById('friends-panel');if(n&&!e){n.remove();return}n&&e&&n.remove();let a=document.getElementById('friends').getBoundingClientRect(),i=document.createElement('div');i.id='friends-panel',i.style.cssText=`position: absolute; width: 200px; height: 300px; background: #2c2c2c; border: 1px solid black; border-radius: 5px; padding: 10px; overflow-y: auto; right: ${window.innerWidth-a.right}px; top: ${a.bottom+6}px;`;let o=document.createElement('h4');o.innerText='\uD83E\uDDD1‍\uD83E\uDD1D‍\uD83E\uDDD1 Znajomi',o.style.textAlign='center';let r=document.createElement('button');r.innerText='❌',r.style.float='right',r.onclick=function(){i.remove()},o.appendChild(r),i.appendChild(o);let c=JSON.parse(localStorage.czateria_znajomi||'[]');if(0===c.length){let l=document.createElement('p');l.innerText='Nie masz jeszcze znajomych!',l.style.textAlign='center',l.style.color='white',i.appendChild(l)}else c.forEach(e=>{let n=document.createElement('div');n.style.cssText='display: flex; justify-content : space-between; align-items : center; padding-bottom : 5px;';let a=document.createElement('span');a.innerText=e;let o=document.createElement('div'),r=document.createElement('button');r.innerText='\uD83D\uDD75️‍♂️',r.onclick=function(){CHNS.connManager.connections[CHNS.activemaintabname].whereIsUser(e)};let l=document.createElement('button');l.innerText='⛔',l.style.marginLeft='5px',l.onclick=function(){let n=c.filter(n=>n!==e);localStorage.czateria_znajomi=JSON.stringify(n),s(!0)},o.appendChild(r),o.appendChild(l),n.appendChild(a),n.appendChild(o),i.appendChild(n)});document.body.appendChild(i)}r.observe(document.body,{childList:!0}),function n(){document.querySelector('.floatbox-box-background').style.background='#2c2c2c',document.getElementById('mainHeader')?.remove(),document.getElementById('m-tab-main-container-1').style.height='100%',['copy','paste'].forEach(e=>window.addEventListener(e,e=>e.stopPropagation(),!0));let a=document.createElement('input');a.type='button',a.id='friends',a.value='Znajomi',a.className='button-send',a.style.height='25px',a.style.marginLeft='auto',a.onclick=function(){let e=document.getElementById('friends-panel');e?e.remove():s()};let o=document.getElementById('m-tab-main-container-1-nav');o.style.display='flex',document.getElementById('friends')||o.appendChild(a),localStorage.czateria_ignorowani&&JSON.parse(localStorage.czateria_ignorowani).forEach(e=>CHNS.listUsersOperations.addToIgnoredUserList(e.hashCode())),CHNS.channelManager.limit=function(e){return 50};let r=Object.values(CHNS.connManager.connections).find(e=>e),c=r.channelMain.addRoomInfoMessage;r.channelMain.addRoomInfoMessage=function(e,n){let a=e.msg.match(/~Użytkownik <b>(.*?)<\/b>/),i=a?a[1]:'Unknown User';if(e.msg.includes('~Użytkownik')&&!e.msg.match(/pokojach:(.*\S)/)){let o=new CHNS.SystemMessage({msg:`Użytkownik <b>${i}</b> nie jest na chwile obecna zalogowany w zadnym pokoju.`});return c.apply(this,[o,n])}return c.apply(this,arguments)};let l=CHNS.viewManager.addNewWindow;CHNS.viewManager.addNewWindow=function(n,a,o){let r=l.apply(this,arguments);return setTimeout(()=>{let a=CHNS.connManager.connections[n.hashCode()];a&&(e(a),i())},500),r},e(CHNS.connManager.connections[CHNS.activemaintabname]),i();let d=new MutationObserver(e=>{e.forEach(e=>{'childList'===e.type&&e.addedNodes.forEach(e=>{if(1===e.nodeType&&e.classList.contains('m-msg-item')){let n=e.querySelector('.m-msg-item-user-message');n&&function e(n){if(n&&!n.dataset.emojiProcessed)CHNS.emotIcons.emotIcons.forEach(({emoticons:e,attachmentId:a})=>{e.forEach(e=>{var i;let o=RegExp((i=e,i.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')),'g');n.innerHTML=n.innerHTML.replace(o,`<span class='img-gif-box'><img src='${CHNS.attachmentsUrl+a}-O0.gif' data-tooltip='${e}' class='img-icon'/></span>`)})}),n.dataset.emojiProcessed='true'}(n)}})})}),m=document.querySelector('.m-tabs-main-container');m&&d.observe(m,{childList:!0,subtree:!0}),console.log('Emoji replacement observer initialized for .m-tabs-main-container.')}()}();})();" style="font-size:80px">&#129313;</a><br><br>

        <div id="codeDiv" class="codeDiv">
Prosty skrypt napisany w JavaScript modyfikujacy wyglad okna czaterii. Skrypt na chwile obecna oferuje nastepujace funkcje: 
<ul><li>Zmiana koloru tla na szary</li><li>Usuniecie gornej reklamy</li><li>Rozciagniecie okna rozmowy na cala wysokosc ekranu</li><li>Usuniecie niezarejestrowanych uzytkownikow z listy uzytkownikow po prawej stronie</li><li>Mozliwosc wklejania tekstu do okna rozmowy</li><li>Automatyczne zamkniecie okna [graj na czaterii]</li><li>Automatyczne ignorowanie uzytkownikow wczesniej zablokowanych</li><li>Dodanie funkcjonalnosci znajomi i mozliwosci wyszukiwania znajomych</li><li>Utrudnianie zycie botom</li><li>Tymczasowo "naprawia" gify na czaterii</li></ul>

Sposob uzycia:
<ol><li>Upewnij sie iz pasek zakladek w przegladarce jest widoczny (wiekszosci przegladarek skrypt CTRL + B pokazuje/ukrywa pasek zakladek)</li><li>Przeciagnij przycisk z klaunem na pasek zakladek</li><li>Bedac w oknie czaterii kliknij na przycisk na pasku zakladek</li></ol>

<br>
<font color = "lime">//minified JS</font>

<code>
javascript: (() => {!function(){function e(e){let n=new Map,a=e.processMessage;e.processMessage=function(e){if((t=JSON.parse(e.data))&&t.code)switch(t.code){case 128:t.users.forEach(e=>{let a=e.login,i=Date.now();n.set(a,i)});break;case 130:let i=t.login;n.delete(i);break;case 129:let o=t.login;if(Date.now()-n.get(o)<3e4)return}return a.apply(this,arguments)}}let n=[];CHNS.emotIcons.emotIcons.forEach(e=>{e.emoticons.forEach(e=>{e.startsWith('icon_')||n.push(e)})});let a=CHNS.UserMessage;function i(){document.querySelector('.m-messagesTextArea').style.backgroundImage='none',document.querySelector('.js-play-game')?.remove(),document.querySelector('div[id^=m-users-ordinary]')?.remove(),CHNS.connManager.connections[CHNS.activemaintabname].channelMain.channelGlobalModel.setShowAvatarStatus(!1),CHNS.connManager.connections[CHNS.activemaintabname].channelMain.$usersListWrapper.addClass('m-usersList-short')}function o(){let e=document.querySelector('.context-menu');if(!e)return;let n=document.getElementsByClassName('context-menu-item context-menu-item--header')[0].innerText,a=new Set(JSON.parse(localStorage.czateria_znajomi||'[]')),i=a.has(n);if(e.querySelector('.context-menu-item--friend'))return;let o=document.createElement('div');o.className='context-menu-item context-menu-item--friend',o.innerText=i?'\uD83D\uDD95 Usuń z listy znajomych':'\uD83D\uDC4B Dodaj do znajomych',o.onclick=function(){i?a.delete(n):a.add(n),localStorage.czateria_znajomi=JSON.stringify([...a]),e.remove();document.getElementById('friends-panel')&&s(!0)},e.appendChild(o),e.querySelector('.context-menu-item--wrongBehavior')?.remove();let r=e.querySelector('.context-menu-item--ignore'),c=new Set(JSON.parse(localStorage.czateria_ignorowani||'[]')),l=c.has(n);r.innerText=l?'✔️ Przestań ignorowac':'⛔ Ignoruj',r.onclick=function(){l?c.delete(n):c.add(n),localStorage.czateria_ignorowani=JSON.stringify([...c]),e.remove()}}CHNS.UserMessage=function(e){return console.log('Original Message:',e.msg),e.msg=e.msg.replace(/<icon>(\d+)<\/icon>/g,(e,a)=>{let i=parseInt(a,10);return n[i]?n[i]:e}),console.log('Modified Message:',e.msg),new a(e)},CHNS.emotIcons.getMessageWithIcons=function(e){return e};let r=new MutationObserver(e=>{for(let n of e)if(n.addedNodes.length&&n.addedNodes[0].classList?.contains('context-menu')){o();break}});function s(e){let n=document.getElementById('friends-panel');if(n&&!e){n.remove();return}n&&e&&n.remove();let a=document.getElementById('friends').getBoundingClientRect(),i=document.createElement('div');i.id='friends-panel',i.style.cssText=`position: absolute; width: 200px; height: 300px; background: #2c2c2c; border: 1px solid black; border-radius: 5px; padding: 10px; overflow-y: auto; right: ${window.innerWidth-a.right}px; top: ${a.bottom+6}px;`;let o=document.createElement('h4');o.innerText='\uD83E\uDDD1‍\uD83E\uDD1D‍\uD83E\uDDD1 Znajomi',o.style.textAlign='center';let r=document.createElement('button');r.innerText='❌',r.style.float='right',r.onclick=function(){i.remove()},o.appendChild(r),i.appendChild(o);let c=JSON.parse(localStorage.czateria_znajomi||'[]');if(0===c.length){let l=document.createElement('p');l.innerText='Nie masz jeszcze znajomych!',l.style.textAlign='center',l.style.color='white',i.appendChild(l)}else c.forEach(e=>{let n=document.createElement('div');n.style.cssText='display: flex; justify-content : space-between; align-items : center; padding-bottom : 5px;';let a=document.createElement('span');a.innerText=e;let o=document.createElement('div'),r=document.createElement('button');r.innerText='\uD83D\uDD75️‍♂️',r.onclick=function(){CHNS.connManager.connections[CHNS.activemaintabname].whereIsUser(e)};let l=document.createElement('button');l.innerText='⛔',l.style.marginLeft='5px',l.onclick=function(){let n=c.filter(n=>n!==e);localStorage.czateria_znajomi=JSON.stringify(n),s(!0)},o.appendChild(r),o.appendChild(l),n.appendChild(a),n.appendChild(o),i.appendChild(n)});document.body.appendChild(i)}r.observe(document.body,{childList:!0}),function n(){document.querySelector('.floatbox-box-background').style.background='#2c2c2c',document.getElementById('mainHeader')?.remove(),document.getElementById('m-tab-main-container-1').style.height='100%',['copy','paste'].forEach(e=>window.addEventListener(e,e=>e.stopPropagation(),!0));let a=document.createElement('input');a.type='button',a.id='friends',a.value='Znajomi',a.className='button-send',a.style.height='25px',a.style.marginLeft='auto',a.onclick=function(){let e=document.getElementById('friends-panel');e?e.remove():s()};let o=document.getElementById('m-tab-main-container-1-nav');o.style.display='flex',document.getElementById('friends')||o.appendChild(a),localStorage.czateria_ignorowani&&JSON.parse(localStorage.czateria_ignorowani).forEach(e=>CHNS.listUsersOperations.addToIgnoredUserList(e.hashCode())),CHNS.channelManager.limit=function(e){return 50};let r=Object.values(CHNS.connManager.connections).find(e=>e),c=r.channelMain.addRoomInfoMessage;r.channelMain.addRoomInfoMessage=function(e,n){let a=e.msg.match(/~Użytkownik <b>(.*?)<\/b>/),i=a?a[1]:'Unknown User';if(e.msg.includes('~Użytkownik')&&!e.msg.match(/pokojach:(.*\S)/)){let o=new CHNS.SystemMessage({msg:`Użytkownik <b>${i}</b> nie jest na chwile obecna zalogowany w zadnym pokoju.`});return c.apply(this,[o,n])}return c.apply(this,arguments)};let l=CHNS.viewManager.addNewWindow;CHNS.viewManager.addNewWindow=function(n,a,o){let r=l.apply(this,arguments);return setTimeout(()=>{let a=CHNS.connManager.connections[n.hashCode()];a&&(e(a),i())},500),r},e(CHNS.connManager.connections[CHNS.activemaintabname]),i();let d=new MutationObserver(e=>{e.forEach(e=>{'childList'===e.type&&e.addedNodes.forEach(e=>{if(1===e.nodeType&&e.classList.contains('m-msg-item')){let n=e.querySelector('.m-msg-item-user-message');n&&function e(n){if(n&&!n.dataset.emojiProcessed)CHNS.emotIcons.emotIcons.forEach(({emoticons:e,attachmentId:a})=>{e.forEach(e=>{var i;let o=RegExp((i=e,i.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')),'g');n.innerHTML=n.innerHTML.replace(o,`<span class='img-gif-box'><img src='${CHNS.attachmentsUrl+a}-O0.gif' data-tooltip='${e}' class='img-icon'/></span>`)})}),n.dataset.emojiProcessed='true'}(n)}})})}),m=document.querySelector('.m-tabs-main-container');m&&d.observe(m,{childList:!0,subtree:!0}),console.log('Emoji replacement observer initialized for .m-tabs-main-container.')}()}();})();
</code>
        </div>
    </center>
</body>
</html>
